#pragma once
#include "Macros.h"

namespace Framework
{
	// Enum for builder
	enum EObjectType
	{
		UNKNOWN = 0,
		GAME_OBJECT = 1,
		TRANSFORM = 2,
		RENDERER = 3,
		RIGIDBODY = 4,
		ANIMATOR = 5
	};

	// Initialize parameters for Game Object
	struct SGameObjectBuilder
	{
	};

	// Initialize parameters for Render Component
	struct SRendererBuilder
	{
		LPCWSTR texturePath = nullptr;
	};

	// Initialize parameters for Transform Component
	struct STransformBuilder
	{
		Vector2 position = VECTOR2_ZERO;
		Vector2 rotation = VECTOR2_ZERO;
		Vector2 scale = VECTOR2_ONE;
	};

	struct SAnimatorBuilder
	{
		LPCWSTR texturePath = nullptr;
		DWORD countWidth = 0, countHeight = 0, count = 0;
		DWORD delay = 0;
	};

	// Builder
	union UObjectData
	{
		SGameObjectBuilder gameObjectData;
		SRendererBuilder renderData;
		STransformBuilder transformData;
		SAnimatorBuilder animatorBuilder;
	};

	// Builder Struct
	struct SBuilder
	{
		EObjectType type = EObjectType::UNKNOWN;
		UObjectData data = { {} };
	};

	// Object class
	class CObject 
	{
		// Properties
	protected:
		EObjectType m_type = EObjectType::UNKNOWN;
		CObject* m_parentObject = nullptr;

		// Cons / Des
	public:
		CObject() = default;
		virtual ~CObject() = default;
		
		// Getters / Setters
	public:
		void SetParentObject(CObject* pParent);

		// Abstract methods
	public:
		virtual void Update(DWORD dt) = 0;

		// Static methods
	public:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
		static CObject* Instantiate(SBuilder builder);
		static void Destroy(CObject* &instance);
	};
}